<%= layout("/layouts/boilerplate") %>

<div class="container mt-5">
  <h2 class="mb-4 text-center"> Your Bookings</h2>

  <% if (bookings.length === 0) { %>
    <p class="text-muted text-center">You haven‚Äôt booked anything yet.</p>
  <% } else { %>
    <div class="row">
      <% bookings.forEach(booking => { %>
        <div class="col-md-6 col-12 mb-4">
          <div class="card h-100 shadow-sm">
            <img src="<%= booking.listing.image.url %>" class="card-img-top booking-img" alt="...">
            <div class="card-body">
              <h5 class="card-title text-center text-md-start"><%= booking.listing.title %></h5>
              <p class="card-text small">
                üìç <%= booking.listing.location %><br>
                 <strong>From:</strong> <%= booking.checkIn.toDateString() %><br>
                 <strong>To:</strong> <%= booking.checkOut.toDateString() %><br>
                üë• <strong>Guests:</strong> <%= booking.guests %>
              </p>
              <form action="/booking/<%= booking._id %>?_method=DELETE" method="POST" class="text-end">
                <button class="btn btn-sm btn-danger">Cancel Booking</button>
              </form>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  <% } %>
</div>

<style>
  .booking-img {
    width: 100%;
    height: 200px;
    object-fit: cover;
  }

  @media (max-width: 576px) {
    .card-body {
      padding: 0.75rem 1rem;
    }

    .card-title {
      font-size: 1rem;
    }

    .card-text {
      font-size: 0.9rem;
    }

    .btn-danger {
      font-size: 0.8rem;
      padding: 0.4rem 0.75rem;
    }
  }
  .card {
  border-radius: 1rem;
  overflow: hidden; /* ‚úÖ Ensures image and card share same rounding */
}

.booking-img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-top-left-radius: 1rem;
  border-top-right-radius: 1rem;
}

</style>
